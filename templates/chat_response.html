<!-- templates/chat_response.html -->
<div class="message-pair mb-3">
    <div class="message user-message p-3 rounded mb-2">
        <strong><i class="fas fa-user"></i> Anda:</strong> {{ query }}
    </div>
    {% if success %}
    <div class="message bot-message p-3 rounded">
        <div class="d-flex justify-content-between align-items-start mb-2">
            <strong><i class="fas fa-robot text-primary"></i> Asisten:</strong>
            <div class="d-flex gap-2">
                <span class="badge bg-secondary intent-badge">{{ intent }}</span>
                <button class="btn btn-sm btn-outline-secondary" onclick="copyToClipboard('{{ response|replace("'", "\\'") }}')">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
        </div>
        <div>{{ response|replace("\n", "<br>")|safe }}</div>
    </div>
    {% else %}
    <div class="message p-3 rounded bg-danger text-white">
        <strong><i class="fas fa-exclamation-triangle"></i> Error:</strong> {{ error }}
        <div class="mt-2">
            <small>Silakan coba lagi atau gunakan contoh pertanyaan yang tersedia.</small>
        </div>
    </div>
    {% endif %}
</div>

<script>
    // Update conversation ID if provided
    {% if conversation_id %}
    document.getElementById('conversation_id').value = '{{ conversation_id }}';
    {% endif %}
    
    // Scroll to bottom and focus input
    scrollChatToBottom();
    setTimeout(() => {
        const input = document.querySelector('input[name="query"]');
        if (input) input.focus();
    }, 100);
</script>

<!-- templates/about.html -->
{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="fas fa-info-circle"></i> Tentang IndoBERT Document CS</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 text-center mb-4">
                        <i class="fas fa-robot fa-4x text-primary mb-3"></i>
                        <h5>AI-Powered</h5>
                        <p class="text-muted">Menggunakan teknologi IndoBERT dan RAG untuk memberikan jawaban yang akurat</p>
                    </div>
                    <div class="col-md-4 text-center mb-4">
                        <i class="fas fa-language fa-4x text-success mb-3"></i>
                        <h5>Bahasa Indonesia</h5>
                        <p class="text-muted">Dilatih khusus untuk memahami bahasa Indonesia dan istilah-istilah dokumen</p>
                    </div>
                    <div class="col-md-4 text-center mb-4">
                        <i class="fas fa-clock fa-4x text-warning mb-3"></i>
                        <h5>24/7 Available</h5>
                        <p class="text-muted">Tersedia kapan saja untuk membantu kebutuhan informasi dokumen Anda</p>
                    </div>
                </div>
                
                <hr>
                
                <h5><i class="fas fa-cogs"></i> Teknologi yang Digunakan</h5>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success"></i> <strong>IndoBERT:</strong> Model bahasa Indonesia untuk pemahaman konteks</li>
                    <li><i class="fas fa-check text-success"></i> <strong>RAG (Retrieval-Augmented Generation):</strong> Sistem retrieval untuk informasi akurat</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Fine-tuning:</strong> Model disesuaikan khusus untuk domain dokumen</li>
                    <li><i class="fas fa-check text-success"></i> <strong>Vector Database:</strong> Pencarian semantik untuk informasi relevan</li>
                </ul>
                
                <h5><i class="fas fa-database"></i> Sumber Data</h5>
                <p>Informasi yang diberikan berdasarkan:</p>
                <ul>
                    <li>Regulasi resmi dari Kementerian Dalam Negeri</li>
                    <li>Prosedur Kepolisian untuk SIM</li>
                    <li>Ketentuan Imigrasi untuk Passport</li>
                    <li>Peraturan Disdukcapil untuk Akta Kelahiran</li>
                </ul>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <strong>Catatan:</strong> Informasi yang diberikan bersifat umum. Untuk kasus khusus atau perubahan terbaru, 
                    disarankan untuk menghubungi instansi terkait langsung.
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

<!-- templates/docs_info.html -->
{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-lg-10 mx-auto">
        <h2 class="mb-4"><i class="fas fa-book"></i> Informasi Dokumen yang Didukung</h2>
        
        <div class="row">
            <!-- KTP Card -->
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="fas fa-id-card"></i> KTP (Kartu Tanda Penduduk)</h5>
                    </div>
                    <div class="card-body">
                        <h6>Yang bisa ditanyakan:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-right text-primary"></i> Persyaratan KTP baru</li>
                            <li><i class="fas fa-arrow-right text-primary"></i> KTP pindah domisili</li>
                            <li><i class="fas fa-arrow-right text-primary"></i> KTP hilang/rusak</li>
                            <li><i class="fas fa-arrow-right text-primary"></i> Perubahan data KTP</li>
                            <li><i class="fas fa-arrow-right text-primary"></i> Biaya dan waktu proses</li>
                        </ul>
                        <div class="mt-3">
                            <button class="btn btn-outline-primary btn-sm" onclick="useExampleQuery('Syarat bikin KTP baru apa aja ya?')">
                                Coba Tanya
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SIM Card -->
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0"><i class="fas fa-car"></i> SIM (Surat Izin Mengemudi)</h5>
                    </div>
                    <div class="card-body">
                        <h6>Yang bisa ditanyakan:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-right text-success"></i> SIM A, B, C baru</li>
                            <li><i class="fas fa-arrow-right text-success"></i> Perpanjangan SIM</li>
                            <li><i class="fas fa-arrow-right text-success"></i> SIM internasional</li>
                            <li><i class="fas fa-arrow-right text-success"></i> SIM hilang/rusak</li>
                            <li><i class="fas fa-arrow-right text-success"></i> Tes dan persyaratan</li>
                        </ul>
                        <div class="mt-3">
                            <button class="btn btn-outline-success btn-sm" onclick="useExampleQuery('Cara perpanjang SIM yang expired?')">
                                Coba Tanya
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Passport Card -->
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-warning text-white">
                        <h5 class="mb-0"><i class="fas fa-passport"></i> Passport</h5>
                    </div>
                    <div class="card-body">
                        <h6>Yang bisa ditanyakan:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-right text-warning"></i> Passport baru dewasa</li>
                            <li><i class="fas fa-arrow-right text-warning"></i> Passport anak</li>
                            <li><i class="fas fa-arrow-right text-warning"></i> Passport hilang</li>
                            <li><i class="fas fa-arrow-right text-warning"></i> Visa requirements</li>
                            <li><i class="fas fa-arrow-right text-warning"></i> Biaya dan jadwal</li>
                        </ul>
                        <div class="mt-3">
                            <button class="btn btn-outline-warning btn-sm" onclick="useExampleQuery('Anak saya mau ke luar negeri, perlu passport ga?')">
                                Coba Tanya
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Akta Kelahiran Card -->
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0"><i class="fas fa-baby"></i> Akta Kelahiran</h5>
                    </div>
                    <div class="card-body">
                        <h6>Yang bisa ditanyakan:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-right text-info"></i> Akta kelahiran bayi</li>
                            <li><i class="fas fa-arrow-right text-info"></i> Akta terlambat</li>
                            <li><i class="fas fa-arrow-right text-info"></i> Akta hilang/rusak</li>
                            <li><i class="fas fa-arrow-right text-info"></i> Orangtua belum menikah</li>
                            <li><i class="fas fa-arrow-right text-info"></i> Koreksi data</li>
                        </ul>
                        <div class="mt-3">
                            <button class="btn btn-outline-info btn-sm" onclick="useExampleQuery('Akta kelahiran hilang bisa diganti ga?')">
                                Coba Tanya
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="alert alert-primary mt-4">
            <h5><i class="fas fa-lightbulb"></i> Tips Bertanya:</h5>
            <ul class="mb-0">
                <li>Gunakan bahasa alami seperti berbicara dengan teman</li>
                <li>Sebutkan kondisi spesifik Anda (misal: "KTP hilang", "SIM expired")</li>
                <li>Tanyakan tentang biaya, waktu, atau lokasi jika diperlukan</li>
                <li>Jika jawaban kurang jelas, tanyakan lebih detail</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

<!-- templates/health.html -->
{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <h2 class="mb-4"><i class="fas fa-heartbeat"></i> System Health Status</h2>
        
        <div class="card">
            <div class="card-header bg-{% if health.status == 'healthy' %}success{% elif health.status == 'warning' %}warning{% else %}danger{% endif %} text-white">
                <h5 class="mb-0">
                    <span class="status-indicator status-{% if health.status == 'healthy' %}healthy{% elif health.status == 'warning' %}warning{% else %}error{% endif %}"></span>
                    System Status: {{ health.status|title }}
                </h5>
            </div>
            <div class="card-body">
                {% if health.system_metrics %}
                <div class="row">
                    <div class="col-md-6">
                        <h6><i class="fas fa-microchip"></i> System Metrics</h6>
                        <ul class="list-unstyled">
                            <li><strong>CPU Usage:</strong> {{ "%.1f"|format(health.system_metrics.cpu_percent) }}%</li>
                            <li><strong>Memory Usage:</strong> {{ "%.1f"|format(health.system_metrics.memory_percent) }}%</li>
                            <li><strong>Memory Used:</strong> {{ "%.1f"|format(health.system_metrics.memory_used_gb) }} GB</li>
                            <li><strong>Disk Usage:</strong> {{ "%.1f"|format(health.system_metrics.disk_usage_percent) }}%</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6><i class="fas fa-robot"></i> AI Model Status</h6>
                        <ul class="list-unstyled">
                            <li><strong>Model Loaded:</strong> 
                                <span class="badge bg-success">✓ Ready</span>
                            </li>
                            <li><strong>Knowledge Base:</strong> 
                                <span class="badge bg-success">✓ Ready</span>
                            </li>
                            {% if health.system_metrics.gpu_memory_used %}
                            <li><strong>GPU Memory:</strong> {{ "%.1f"|format(health.system_metrics.gpu_memory_used) }} GB</li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
                {% endif %}
                
                {% if health.alerts %}
                <div class="alert alert-warning mt-3">
                    <h6><i class="fas fa-exclamation-triangle"></i> Alerts:</h6>
                    <ul class="mb-0">
                        {% for alert in health.alerts %}
                        <li>{{ alert }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
                
                <div class="mt-3">
                    <small class="text-muted">
                        <i class="fas fa-clock"></i> 
                        Last Updated: {{ health.timestamp }}
                    </small>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-4">
            <button class="btn btn-outline-primary" onclick="location.reload()">
                <i class="fas fa-sync-alt"></i> Refresh Status
            </button>
            <a href="/docs" class="btn btn-outline-secondary ms-2" target="_blank">
                <i class="fas fa-code"></i> API Documentation
            </a>
        </div>
    </div>
</div>
{% endblock %}
